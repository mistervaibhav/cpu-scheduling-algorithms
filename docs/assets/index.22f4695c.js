(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function a(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=a(r);fetch(r.href,l)}})();let N=1;document.getElementById("priority-toggle-btn").onclick=()=>{document.getElementById("priority-preference").innerText=="high"?document.getElementById("priority-preference").innerText="low":document.getElementById("priority-preference").innerText="high",N*=-1};let y=document.getElementById("algo");function z(){let e=document.querySelector("#time-quantum").classList;y.value=="rr"?e.remove("hide"):e.add("hide")}function O(){let e=document.querySelectorAll(".priority");y.value=="pnp"||y.value=="pp"?e.forEach(t=>{t.classList.remove("hide")}):e.forEach(t=>{t.classList.add("hide")})}y.onchange=()=>{z(),O()};function E(){document.querySelectorAll("input").forEach(t=>{t.type=="number"&&(t.onchange=()=>{let a=Number(t.value),i=Number.isInteger(a);t.parentNode.classList.contains("arrival-time")||t.id=="context-switch"?!i||i&&a<0?t.value=0:t.value=a:!i||i&&a<1?t.value=1:t.value=a})})}E();let g=1;function D(e,t){for(;t;){let a=t;t=e%t,e=a}return e}function Z(e,t){return e*t/D(e,t)}function K(){let e=1;for(let t=0;t<g;t++)e=Z(e,document.querySelector(".main-table").rows[2*t+2].cells.length);return e}function H(){let e=K();document.querySelector("thead .process-time").setAttribute("colspan",e);let a=[],i=document.querySelector(".main-table");for(let r=0;r<g;r++){let l=i.rows[2*r+2].cells;a.push(l.length)}for(let r=0;r<g;r++){let l=i.rows[2*r+1].cells,d=i.rows[2*r+2].cells;for(let n=0;n<a[r];n++)l[n+3].setAttribute("colspan",e/a[r]),d[n].setAttribute("colspan",e/a[r])}}function q(){let e=[],t=document.querySelector(".main-table");for(let r=0;r<g;r++){let l=t.rows[2*r+2].cells;e.push(l.length)}let a=document.querySelectorAll(".add-process-btn");for(let r=0;r<g;r++)a[r].onclick=()=>{let l=document.querySelector(".main-table"),d=l.rows[2*r+1],n=l.rows[2*r+2],o=d.insertCell(e[r]+3);o.innerHTML="IO",o.classList.add("process-time"),o.classList.add("io"),o.classList.add("process-heading");let s=n.insertCell(e[r]);s.innerHTML='<input type="number" min="1" step="1" value="1">',s.classList.add("process-time"),s.classList.add("io"),s.classList.add("process-input");let c=d.insertCell(e[r]+4);c.innerHTML="CPU",c.classList.add("process-time"),c.classList.add("cpu"),c.classList.add("process-heading");let h=n.insertCell(e[r]+1);h.innerHTML='<input type="number" min="1" step="1" value="1">',h.classList.add("process-time"),h.classList.add("cpu"),h.classList.add("process-input"),e[r]+=2,H(),E()};let i=document.querySelectorAll(".remove-process-btn");for(let r=0;r<g;r++)i[r].onclick=()=>{if(e[r]>1){let l=document.querySelector(".main-table");e[r]--;let d=l.rows[2*r+1];d.deleteCell(e[r]+3);let n=l.rows[2*r+2];n.deleteCell(e[r]),e[r]--,l=document.querySelector(".main-table"),d=l.rows[2*r+1],d.deleteCell(e[r]+3),n=l.rows[2*r+2],n.deleteCell(e[r]),H()}}}q();function $(){g++;let e=`
                          <td class="process-id" rowspan="2">P${g}</td>
                          <td class="priority hide" rowspan="2"><input type="number" min="1" step="1" value="1"></td>
                          <td class="arrival-time" rowspan="2"><input type="number" min="0" step="1" value="0"> </td>
                          <td class="process-time cpu process-heading" colspan="">CPU</td>
                          <td class="process-btn"><button type="button" class="add-process-btn">+</button></td>
                          <td class="process-btn"><button type="button" class="remove-process-btn">-</button></td>
                      `,t=`
                           <td class="process-time cpu process-input"><input type="number" min="1" step="1" value="1"> </td>
                      `,a=document.querySelector(".main-table tbody");a.insertRow(a.rows.length).innerHTML=e,a.insertRow(a.rows.length).innerHTML=t,O(),q(),H(),E()}function X(){let e=document.querySelector(".main-table");g>1&&(e.deleteRow(e.rows.length-1),e.deleteRow(e.rows.length-1),g--),H(),E()}document.querySelector(".add-btn").onclick=()=>{$()};document.querySelector(".remove-btn").onclick=()=>{X()};class S{constructor(){this.processId=[],this.priority=[],this.arrivalTime=[],this.processTime=[],this.processTimeLength=[],this.totalBurstTime=[],this.algorithm="",this.algorithmType="",this.timeQuantum=0,this.contextSwitch=0}}class B{constructor(){this.remainingProcessTime=[],this.remainingBurstTime=[],this.remainingTimeRunning=[],this.currentProcessIndex=[],this.start=[],this.done=[],this.returnTime=[],this.currentTime=0}}class x{constructor(){this.completionTime=[],this.turnAroundTime=[],this.waitingTime=[],this.responseTime=[],this.schedule=[],this.timeLog=[],this.contextSwitches=0,this.averageTimes=[]}}class Y{constructor(){this.time=-1,this.remain=[],this.ready=[],this.running=[],this.block=[],this.terminate=[],this.move=[]}}function k(e,t){switch(e.algorithm=t,t){case"fcfs":case"sjf":case"ljf":case"pnp":case"hrrn":e.algorithmType="nonpreemptive";break;case"srtf":case"lrtf":case"pp":e.algorithmType="preemptive";break;case"rr":e.algorithmType="roundrobin";break}}function R(e){for(let t=1;t<=g;t++){e.processId.push(t-1);let a=document.querySelector(".main-table").rows[2*t-1].cells,i=document.querySelector(".main-table").rows[2*t].cells;e.priority.push(Number(a[1].firstElementChild.value)),e.arrivalTime.push(Number(a[2].firstElementChild.value));let r=Number(i.length),l=[];for(let d=0;d<r;d++)l.push(Number(i[d].firstElementChild.value));e.processTime.push(l),e.processTimeLength.push(r)}e.totalBurstTime=new Array(g).fill(0),e.processTime.forEach((t,a)=>{t.forEach((i,r)=>{r%2==0&&(e.totalBurstTime[a]+=i)})}),k(e,y.value),e.contextSwitch=Number(document.querySelector("#context-switch").value),e.timeQuantum=Number(document.querySelector("#tq").value)}function I(e,t){t.remainingProcessTime=e.processTime.slice(),t.remainingBurstTime=e.totalBurstTime.slice(),t.remainingTimeRunning=new Array(g).fill(0),t.currentProcessIndex=new Array(g).fill(0),t.start=new Array(g).fill(!1),t.done=new Array(g).fill(!1),t.returnTime=e.arrivalTime.slice()}function _(e){let t=[],a=e[0][0],i=e[0][1];for(let r=1;r<e.length;r++)e[r][0]==a?i+=e[r][1]:(t.push([a,i]),a=e[r][0],i=e[r][1]);return t.push([a,i]),t}function J(e){let t=e.length,a=[],i=0;for(let r=0;r<t-1;r++)e[r]!=e[r+1]&&a.push(e[i]),i=r+1;return i==t-1&&a.push(e[i]),a}function ee(e){let t=0;e.completionTime.forEach(l=>{t+=l}),t/=g;let a=0;e.turnAroundTime.forEach(l=>{a+=l}),a/=g;let i=0;e.waitingTime.forEach(l=>{i+=l}),i/=g;let r=0;return e.responseTime.forEach(l=>{r+=l}),r/=g,[t,a,i,r]}function P(e,t){for(let a=0;a<g;a++)t.turnAroundTime[a]=t.completionTime[a]-e.arrivalTime[a],t.waitingTime[a]=t.turnAroundTime[a]-e.totalBurstTime[a];t.schedule=_(t.schedule),t.timeLog=J(t.timeLog),t.averageTimes=ee(t)}function w(e){return new Date(0,0,0,0,e/60,e%60)}function te(e,t){let a=document.createElement("h3");a.innerHTML="Gantt Chart",t.appendChild(a);let i=[],r=0;e.schedule.forEach(n=>{n[0]==-2?i.push(["Time","CS","grey",w(r),w(r+n[1])]):n[0]==-1?i.push(["Time","Empty","black",w(r),w(r+n[1])]):i.push(["Time","P"+n[0],"",w(r),w(r+n[1])]),r+=n[1]});let l=document.createElement("div");l.id="gantt-chart",google.charts.load("current",{packages:["timeline"]}),google.charts.setOnLoadCallback(d);function d(){var n=document.getElementById("gantt-chart"),o=new google.visualization.Timeline(n),s=new google.visualization.DataTable;s.addColumn({type:"string",id:"Gantt Chart"}),s.addColumn({type:"string",id:"Process"}),s.addColumn({type:"string",id:"style",role:"style"}),s.addColumn({type:"date",id:"Start"}),s.addColumn({type:"date",id:"End"}),s.addRows(i);let c="100%";r>=20&&(c=.05*r*screen.availWidth);var h={width:c,timeline:{showRowLabels:!1,avoidOverlappingGridLines:!1}};o.draw(s,h)}t.appendChild(l)}function re(e,t){let a=document.createElement("h3");a.innerHTML="Timeline Chart",t.appendChild(a);let i=[],r=0;e.schedule.forEach(n=>{n[0]>=0&&i.push(["P"+n[0],w(r),w(r+n[1])]),r+=n[1]}),i.sort((n,o)=>parseInt(n[0].substring(1,n[0].length))-parseInt(o[0].substring(1,o[0].length)));let l=document.createElement("div");l.id="timeline-chart",google.charts.load("current",{packages:["timeline"]}),google.charts.setOnLoadCallback(d);function d(){var n=document.getElementById("timeline-chart"),o=new google.visualization.Timeline(n),s=new google.visualization.DataTable;s.addColumn({type:"string",id:"Process"}),s.addColumn({type:"date",id:"Start"}),s.addColumn({type:"date",id:"End"}),s.addRows(i);let c="100%";r>=20&&(c=.05*r*screen.availWidth);var h={width:c};o.draw(s,h)}t.appendChild(l)}function ne(e,t,a){let i=document.createElement("h3");i.innerHTML="Final Table",a.appendChild(i);let r=document.createElement("table");r.classList.add("final-table");let d=r.createTHead().insertRow(0);["Process","Arrival Time","Total Burst Time","Completion Time","Turn Around Time","Waiting Time","Response Time"].forEach((m,p)=>{let T=d.insertCell(p);T.innerHTML=m});let o=r.createTBody();for(let m=0;m<g;m++){let p=o.insertRow(m),T=p.insertCell(0);T.innerHTML="P"+(m+1),T=p.insertCell(1),T.innerHTML=e.arrivalTime[m],T=p.insertCell(2),T.innerHTML=e.totalBurstTime[m],T=p.insertCell(3),T.innerHTML=t.completionTime[m],T=p.insertCell(4),T.innerHTML=t.turnAroundTime[m],T=p.insertCell(5),T.innerHTML=t.waitingTime[m],T=p.insertCell(6),T.innerHTML=t.responseTime[m]}a.appendChild(r);let s=0;e.totalBurstTime.forEach(m=>s+=m);let c=0;t.completionTime.forEach(m=>c=Math.max(c,m));let h=document.createElement("p");h.innerHTML="CPU Utilization : "+s/c*100+"%",a.appendChild(h);let b=document.createElement("p");if(b.innerHTML="Throughput : "+g/c,a.appendChild(b),e.contextSwitch>0){let m=document.createElement("p");m.innerHTML="Number of Context Switches : "+(t.contextSwitches-1),a.appendChild(m)}}function A(e,t){let a=["remain-ready","ready-running","running-terminate","running-ready","running-block","block-ready"];e.move.forEach(i=>{document.getElementById(a[i]).style.color=t})}function le(e){let t=document.getElementById("time-log-table-div"),a=`
    <p id = "remain-ready" class = "arrow">&rarr;</p>
    <p id = "ready-running" class = "arrow">&#10554;</p>
    <p id = "running-ready" class = "arrow">&#10554;</p>
    <p id = "running-terminate" class = "arrow">&rarr;</p>
    <p id = "running-block" class = "arrow">&rarr;</p>
    <p id = "block-ready" class = "arrow">&rarr;</p>
    `;t.innerHTML=a;let i=document.createElement("table");i.id="remain-table",i.className="time-log-table";let d=i.createTHead().insertRow(0).insertCell(0);d.innerHTML="Remain";let n=i.createTBody();for(let u=0;u<e.remain.length;u++){let f=n.insertRow(u).insertCell(0);f.innerHTML="P"+(e.remain[u]+1)}t.appendChild(i);let o=document.createElement("table");o.id="ready-table",o.className="time-log-table";let h=o.createTHead().insertRow(0).insertCell(0);h.innerHTML="Ready";let b=o.createTBody();for(let u=0;u<e.ready.length;u++){let f=b.insertRow(u).insertCell(0);f.innerHTML="P"+(e.ready[u]+1)}t.appendChild(o);let m=document.createElement("table");m.id="running-table",m.className="time-log-table";let F=m.createTHead().insertRow(0).insertCell(0);F.innerHTML="Running";let Q=m.createTBody();for(let u=0;u<e.running.length;u++){let f=Q.insertRow(u).insertCell(0);f.innerHTML="P"+(e.running[u]+1)}t.appendChild(m);let C=document.createElement("table");C.id="block-table",C.className="time-log-table";let U=C.createTHead().insertRow(0).insertCell(0);U.innerHTML="Block";let W=C.createTBody();for(let u=0;u<e.block.length;u++){let f=W.insertRow(u).insertCell(0);f.innerHTML="P"+(e.block[u]+1)}t.appendChild(C);let v=document.createElement("table");v.id="terminate-table",v.className="time-log-table";let G=v.createTHead().insertRow(0).insertCell(0);G.innerHTML="Terminate";let V=v.createTBody();for(let u=0;u<e.terminate.length;u++){let f=V.insertRow(u).insertCell(0);f.innerHTML="P"+(e.terminate[u]+1)}t.appendChild(v),document.getElementById("time-log-time").innerHTML="Time : "+e.time}function ae(e,t){J(e.timeLog);let a=document.createElement("div");a.id="time-log-div",a.style.height=15*g+300+"px";let i=document.createElement("button");i.id="start-time-log",i.innerHTML="Start Time Log",a.appendChild(i),t.appendChild(a),document.querySelector("#start-time-log").onclick=()=>{timeLogStart=1;let r=document.getElementById("time-log-div"),l=document.createElement("div");l.id="time-log-output-div";let d=document.createElement("div");d.id="time-log-table-div";let n=document.createElement("p");n.id="time-log-time",l.appendChild(d),l.appendChild(n),r.appendChild(l);let o=0,s=setInterval(()=>{le(e.timeLog[o]),o!=e.timeLog.length-1&&setTimeout(()=>{A(e.timeLog[o],"red"),setTimeout(()=>{A(e.timeLog[o],"black")},600)},200),o++,o==e.timeLog.length&&clearInterval(s),document.getElementById("calculate").onclick=()=>{clearInterval(s),document.getElementById("time-log-output-div").innerHTML="",j()}},1e3)}}function ie(e){let t=new S;R(t);let a=0;t.processTime.forEach(n=>{n.forEach((o,s)=>{s%2==0&&(a=Math.max(a,o))})});let i=[[],[],[],[],[]],r=[];for(let n=1;n<=a;n++){r.push(n);let o=new S;R(o),k(o,"rr"),o.timeQuantum=n;let s=new B;I(o,s);let c=new x;M(o,s,c),P(o,c);for(let h=0;h<4;h++)i[h].push(c.averageTimes[h]);i[4].push(c.contextSwitches)}let l=document.createElement("canvas");l.id="round-robin-chart";let d=document.createElement("div");d.id="round-robin-chart-div",d.appendChild(l),e.appendChild(d),new Chart(document.getElementById("round-robin-chart"),{type:"line",data:{labels:r,datasets:[{label:"Completion Time",borderColor:"#3366CC",data:i[0]},{label:"Turn Around Time",borderColor:"#DC3912",data:i[1]},{label:"Waiting Time",borderColor:"#FF9900",data:i[2]},{label:"Response Time",borderColor:"#109618",data:i[3]},{label:"Context Switches",borderColor:"#990099",data:i[4]}]},options:{title:{display:!0,text:["Round Robin","Comparison of Completion, Turn Around, Waiting, Response Time and Context Switches","The Lower The Better"]},scales:{yAxes:[{ticks:{beginAtZero:!0}}],xAxes:[{scaleLabel:{display:!0,labelString:"Time Quantum"}}]},legend:{display:!0,labels:{fontColor:"black"}}}})}function oe(e){let t=["fcfs","sjf","srtf","ljf","lrtf","rr","hrrn","pnp","pp"],a=["FCFS","SJF","SRTF","LJF","LRTF","RR","HRRN","PNP","PP"],i=[[],[],[],[]];t.forEach(d=>{let n=new S,o=new B,s=new x;R(n),k(n,d),I(n,o),M(n,o,s),P(n,s);for(let c=0;c<4;c++)i[c].push(s.averageTimes[c])});let r=document.createElement("canvas");r.id="algorithm-chart";let l=document.createElement("div");l.id="algorithm-chart-div",l.style.height="40vh",l.style.width="80%",l.appendChild(r),e.appendChild(l),new Chart(document.getElementById("algorithm-chart"),{type:"bar",data:{labels:a,datasets:[{label:"Completion Time",backgroundColor:"#3366CC",data:i[0]},{label:"Turn Around Time",backgroundColor:"#DC3912",data:i[1]},{label:"Waiting Time",backgroundColor:"#FF9900",data:i[2]},{label:"Response Time",backgroundColor:"#109618",data:i[3]}]},options:{title:{display:!0,text:["Algorithm","Comparison of Completion, Turn Around, Waiting and Response Time","The Lower The Better"]},scales:{yAxes:[{ticks:{beginAtZero:!0}}],xAxes:[{scaleLabel:{display:!0,labelString:"Algorithms"}}]},legend:{display:!0,labels:{fontColor:"black"}}}})}function se(e,t,a){te(t,a),a.insertAdjacentHTML("beforeend","<hr>"),re(t,a),a.insertAdjacentHTML("beforeend","<hr>"),ne(e,t,a),a.insertAdjacentHTML("beforeend","<hr>"),ae(t,a),a.insertAdjacentHTML("beforeend","<hr>"),y.value=="rr"&&(ie(a),a.insertAdjacentHTML("beforeend","<hr>")),oe(a)}function M(e,t,a){function i(n){let o=n.remain.filter(h=>e.arrivalTime[h]<=n.time);o.length>0&&n.move.push(0);let s=n.block.filter(h=>t.returnTime[h]<=n.time);s.length>0&&n.move.push(5);let c=o.concat(s);c.sort((h,b)=>t.returnTime[h]-t.returnTime[b]),c.forEach(h=>{r(h,n.remain,n.ready),r(h,n.block,n.ready)}),a.timeLog.push(JSON.parse(JSON.stringify(n))),n.move=[]}function r(n,o,s){let c=o.indexOf(n);c!=-1&&o.splice(c,1),s.indexOf(n)==-1&&s.push(n)}let l=new Y;l.remain=e.processId,a.timeLog.push(JSON.parse(JSON.stringify(l))),l.move=[],l.time++;let d=-1;for(;t.done.some(n=>n==!1);){i(l);let n=-1;if(l.running.length==1)n=l.running[0];else if(l.ready.length>0){if(e.algorithm=="rr")n=l.ready[0],t.remainingTimeRunning[n]=Math.min(t.remainingProcessTime[n][t.currentProcessIndex[n]],e.timeQuantum);else{let o=l.ready;if(o.sort((s,c)=>s-c),o.sort((s,c)=>{switch(e.algorithm){case"fcfs":return t.returnTime[s]-t.returnTime[c];case"sjf":case"srtf":return t.remainingBurstTime[s]-t.remainingBurstTime[c];case"ljf":case"lrtf":return t.remainingBurstTime[c]-t.remainingBurstTime[s];case"pnp":case"pp":return N*(e.priority[s]-e.priority[c]);case"hrrn":let b=function(m){let p=t.remainingBurstTime[m],T=l.time-e.arrivalTime[m]-p;return 1+T/p};var h=b;return b(c)-b(s)}}),n=o[0],e.algorithmType=="preemptive"&&n>=0&&d>=0&&n!=d){a.schedule.push([-2,e.contextSwitch]);for(let s=0;s<e.contextSwitch;s++,l.time++)i(l);e.contextSwitch>0&&a.contextSwitches++}}r(n,l.ready,l.running),l.move.push(1),a.timeLog.push(JSON.parse(JSON.stringify(l))),l.move=[],t.start[n]==!1&&(t.start[n]=!0,a.responseTime[n]=l.time-e.arrivalTime[n])}if(l.time++,n!=-1)if(a.schedule.push([n+1,1]),t.remainingProcessTime[n][t.currentProcessIndex[n]]--,t.remainingBurstTime[n]--,e.algorithm=="rr"){if(t.remainingTimeRunning[n]--,t.remainingTimeRunning[n]==0){t.remainingProcessTime[n][t.currentProcessIndex[n]]==0?(t.currentProcessIndex[n]++,t.currentProcessIndex[n]==e.processTimeLength[n]?(t.done[n]=!0,a.completionTime[n]=l.time,r(n,l.running,l.terminate),l.move.push(2)):(t.returnTime[n]=l.time+e.processTime[n][t.currentProcessIndex[n]],t.currentProcessIndex[n]++,r(n,l.running,l.block),l.move.push(4)),a.timeLog.push(JSON.parse(JSON.stringify(l))),l.move=[],i(l)):(i(l),r(n,l.running,l.ready),l.move.push(3),a.timeLog.push(JSON.parse(JSON.stringify(l))),l.move=[]),a.schedule.push([-2,e.contextSwitch]);for(let o=0;o<e.contextSwitch;o++,l.time++)i(l);e.contextSwitch>0&&a.contextSwitches++}}else if(t.remainingProcessTime[n][t.currentProcessIndex[n]]==0){if(t.currentProcessIndex[n]++,t.currentProcessIndex[n]==e.processTimeLength[n]?(t.done[n]=!0,a.completionTime[n]=l.time,r(n,l.running,l.terminate),l.move.push(2)):(t.returnTime[n]=l.time+e.processTime[n][t.currentProcessIndex[n]],t.currentProcessIndex[n]++,r(n,l.running,l.block),l.move.push(4)),a.timeLog.push(JSON.parse(JSON.stringify(l))),l.move=[],l.running.length==0){a.schedule.push([-2,e.contextSwitch]);for(let o=0;o<e.contextSwitch;o++,l.time++)i(l);e.contextSwitch>0&&a.contextSwitches++}d=-1}else e.algorithmType=="preemptive"&&(r(n,l.running,l.ready),l.move.push(3),a.timeLog.push(JSON.parse(JSON.stringify(l))),l.move=[],d=n);else a.schedule.push([-1,1]),d=-1;a.timeLog.push(JSON.parse(JSON.stringify(l)))}a.schedule.pop()}function j(){let e=document.getElementById("output");e.innerHTML="";let t=new S,a=new B,i=new x;R(t),I(t,a),M(t,a,i),P(t,i),se(t,i,e)}document.getElementById("calculate").onclick=()=>{j()};
